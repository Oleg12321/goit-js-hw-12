{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const requestsData = async (inputData, page, perPage) => {\n  try {\n    const params = new URLSearchParams({\n      key: '45097598-139b329fd073a7b3efd511e46',\n      q: inputData,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    });\n    const response = await axios.get(`?${params}`);\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      message: `Something went wrong. Please try again later. ${error.message}`,\n    });\n    throw error;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const galleryShow = (data, galleryList) => {\n  if (data.length <= 0) {\n    galleryList.innerHTML = '';\n    return;\n  }\n  data.forEach(item => {\n    let galleryItem = `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=${item.largeImageURL}>\n                <img\n                class=\"gallery-image\"\n                src=${item.webformatURL}\n                data-source=${item.largeImageURL}\n                alt=${item.tags}\n                title=\"${item.tags}\"\n                />\n            </a>\n            <ul class=\"content\">\n              <li class=\"content__data\">\n                <h3 class=\"content__title\">Likes</h3>\n                <span class=\"content__number\">${item.likes}</span>\n              </li>\n              <li class=\"content__data\">\n                <h3 class=\"content__title\">Views</h3>\n                <span class=\"content__number\">${item.views}</span>\n              </li>\n              <li class=\"content__data\">\n                <h3 class=\"content__title\">Comments</h3>\n                <span class=\"content__number\">${item.comments}</span>\n              </li>\n              <li class=\"content__data\">\n                <h3 class=\"content__title\">Downloads</h3>\n                <span class=\"content__number\">${item.downloads}</span>\n              </li>\n            </ul>\n        </li>\n    `;\n\n    galleryList.insertAdjacentHTML('beforeend', galleryItem);\n  });\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { requestsData } from './js/pixabay-api.js';\nimport { galleryShow } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst myForm = document.querySelector('#myForm');\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderBtn = document.querySelector('.load-more');\nloaderBtn.style.display = 'none';\n\nlet page = 1;\nlet perPage = 15;\nlet currentSearchTerm = ''; // Змінна для збереження поточного терміну пошуку\n\nmyForm.addEventListener('submit', e => {\n  e.preventDefault();\n  currentSearchTerm = e.target.elements.search.value.trim();\n\n  if (currentSearchTerm === '') {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    loaderBtn.style.display = 'none';\n    return;\n  }\n\n  galleryList.innerHTML = '';\n  page = 1; // Скидання номера сторінки на 1 при новому пошуку\n\n  requestsData(currentSearchTerm, page, perPage)\n    .then(data => {\n      if (data.hits.length <= 0) {\n        e.target.elements.search.value = '';\n        loaderBtn.style.display = 'none';\n        return;\n      }\n      galleryShow(data.hits, galleryList);\n      e.target.elements.search.value = '';\n\n      const lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n      loaderBtn.style.display = 'block';\n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n      });\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n});\n\nloaderBtn.addEventListener('click', async () => {\n  loader.style.display = 'inline-block';\n  page += 1; // Інкрементуємо номер сторінки до запиту\n\n  try {\n    const carts = await requestsData(currentSearchTerm, page, perPage); // Використовуємо глобальний термін пошуку\n    galleryShow(carts.hits, galleryList);\n\n    let totalPages = Math.ceil(carts.totalHits / perPage);\n    if (page > totalPages) {\n      loaderBtn.style.display = 'none';\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return;\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n      const itemHeight = galleryItems[0].getBoundingClientRect().height;\n      window.scrollBy({\n        top: itemHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n    loader.style.display = 'none';\n  } catch (error) {\n    console.error(error);\n    page -= 1; // Відкат сторінки в разі помилки\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n"],"names":["axios","requestsData","inputData","page","perPage","params","response","iziToast","error","galleryShow","data","galleryList","item","galleryItem","myForm","loader","loaderBtn","currentSearchTerm","e","SimpleLightbox","carts","totalPages","galleryItems","itemHeight"],"mappings":"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"}